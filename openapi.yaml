openapi: 3.0.3
info:
  title: Beyond room energy simulation API
  description: |-
    This is the preliminary OpenAPI specification for project Beyond to start room energy simulations and retrieve results asynchronously
  version: 1.0.0
servers:
  - url: https://beyond.dilt.at/api/v1
tags:
  - name: simulation
    description: Simulation operations
paths:
  /simulation:
    post:
      tags:
        - simulation
      summary: Start a simulation
      requestBody:
        description: Simulation parameters
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/T_SimulationParameters'
                
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/T_SimulationResponse'

  /simulation/{id}:
    get:
      tags:
        - simulation
      summary: Get simulation result by id
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/T_SimulationResult'
        '404':
          description: simulation not found
components:
  schemas:
    T_SimulationResult:
      type: object
      required:
        - id
        - status
      properties:
        id:
          type: string
          example: 12345
        status:
          type: string
          enum: [ STARTED, RETRY, FAILURE, SUCCESS ]
        heating_energy_consumption:
          type: number
        cooling_energy_consumption:
          type: number
        date_done:
          type: string
          format: 'date-time'
    T_SimulationResponse:
      type: object
      required:
        - id
      properties:
        id:
          type: string
          example: 12345
    T_SimulationParameters:
      type: object
      required:
        - wall_insulation_thickness
        - wall_u_value
        - window_u_value
        - window_shgc
        - window_shading_control
        - thermostat_setpoint
      properties:
        wall_insulation_thickness:
          description: Wall insulation thickness (m)
          type: number
        wall_u_value:
          description: Wall U-Value (W/m2K)
          type: number
        window_u_value:
          description: Window U-value (W/m2K)
          type: number
        window_shgc:
          description: Window SHGC (ratio)
          type: number
        window_shading_control:
          description: Window shading control (W/m2)
          type: number
        thermostat_setpoint:
          description: Cooling/heating thermostat setpoints (C)
          type: number